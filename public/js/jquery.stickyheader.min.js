$(function(){$("table").each(function(){if($(this).find("thead").length>0&&$(this).find("th").length>0){var t=$(window),i=$(this),s=i.find("thead").clone(),e=i.find("thead, tbody").clone();i.addClass("sticky-enabled").css({margin:0,width:"100%"}).wrap('<div class="sticky-wrap" />'),i.hasClass("overflow-y")&&i.removeClass("overflow-y").parent().addClass("overflow-y"),i.after('<table class="sticky-thead" />'),i.find("tbody th").length>0&&i.after('<table class="sticky-col" /><table class="sticky-intersect" />');var h=$(this).siblings(".sticky-thead"),d=$(this).siblings(".sticky-col"),o=$(this).siblings(".sticky-intersect"),a=$(this).parent(".sticky-wrap");h.append(s),d.append(e).find("thead th:gt(0)").remove().end().find("tbody td").remove(),o.html("<thead><tr><th>"+i.find("thead th:first-child").html()+"</th></tr></thead>");var n=function(){i.find("thead th").each(function(t){h.find("th").eq(t).width($(this).width())}).end().find("tr").each(function(t){d.find("tr").eq(t).height($(this).height())}),h.width(i.width()),d.find("th").add(o.find("th")).width(i.find("thead th").width())},c=function(){var s=f();i.height()>a.height()?a.scrollTop()>0?h.add(o).css({opacity:1,top:a.scrollTop()}):h.add(o).css({opacity:0,top:0}):t.scrollTop()>i.offset().top&&t.scrollTop()<i.offset().top+i.outerHeight()-s?h.add(o).css({opacity:1,top:t.scrollTop()-i.offset().top}):h.add(o).css({opacity:0,top:0})},l=function(){a.scrollLeft()>0?d.add(o).css({opacity:1,left:a.scrollLeft()}):d.css({opacity:0}).add(o).css({left:0})},f=function(){var s=0;return i.find("tbody tr:lt(3)").each(function(){s+=$(this).height()}),s>.25*t.height()&&(s=.25*t.height()),s+=h.height()};n(),i.parent(".sticky-wrap").scroll($.throttle(300,function(){c(),l()})),t.on("load",n).resize($.debounce(100,function(){n(),c(),l()})).scroll($.throttle(300,c))}})});